{% extends "base.html" %}
{% block title %}دسته خبر{% endblock %}

{% block content %}
<div class="container" dir="rtl">
  <a class="back" href="{% url 'news_category_list' %}">← بازگشت به دسته‌ها</a>

  <header class="head">
    <h1>{{ category.name|default:category.english_name }}</h1>
    {% if category.english_name %}<div class="sub">{{ category.english_name }}</div>{% endif %}
  </header>

  <section>
    <h2>اخبار این دسته</h2>
    {% if news_list %}
      <ul class="news-grid">
        {% for n in news_list %}
          <li class="card">
            <a href="{% url 'news_detail' n.pk %}">
              <div class="row">
                <div class="txt">
                  <h3 class="title">{{ n.name|default:n.english_name }}</h3>
                  <div class="meta">
                    {% if n.publish_time %}<span>{{ n.publish_time|date:"Y-m-d H:i" }}</span>{% endif %}
                    {% if n.read_time %}<span>زمان مطالعه: {{ n.read_time }} دقیقه</span>{% endif %}
                    {% if n.writer_name %}<span>خبرنگار: {{ n.writer_name }}</span>{% endif %}
                  </div>
                  {% if n.short_description %}
                    <p class="desc">{{ n.short_description|truncatechars:180 }}</p>
                  {% endif %}
                </div>
                {% if n.view_image %}
                  <div class="thumb"><img src="{{ n.view_image.url }}" alt="{{ n.name|default:'News' }}"></div>
                {% endif %}
              </div>
            </a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>خبری برای این دسته موجود نیست.</p>
    {% endif %}
  </section>
</div>

<style>
.container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
.back { text-decoration: none; display: inline-block; margin-bottom: 1rem; }
.head h1 { margin: .2rem 0; }
.sub { color: #666; }
.news-grid { list-style: none; padding: 0; display: grid; gap: 1rem; }
.card { border: 1px solid #eee; border-radius: 12px; background: #fff; }
.card a { display: block; padding: 1rem; color: inherit; text-decoration: none; }
.row { display: grid; grid-template-columns: 1fr 220px; gap: 1rem; align-items: start; }
.thumb img { width: 100%; height: auto; border-radius: 10px; display: block; }
.title { margin: 0; }
.meta { display: flex; gap: 1rem; font-size: .85rem; color: #666; margin-top: .25rem; flex-wrap: wrap; }
.desc { margin-top: .4rem; color: #333; }
@media (max-width: 720px) { .row { grid-template-columns: 1fr; } }
</style>
{% endblock %}
