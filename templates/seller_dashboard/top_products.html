{% extends "seller_dashboard/dashboard.html" %}

{% block mainContent %}
<div class="max-w-6xl mx-auto px-4 py-10">
  <h2 class="text-2xl font-bold text-[#1C39BB] mb-6">🏆 پرفروش‌ترین محصولات</h2>
  <table class="w-full table-auto bg-white rounded shadow text-right">
    <thead class="bg-[#1C39BB] text-white">
      <tr>
        <th class="p-3">نام محصول</th>
        <th class="p-3">تعداد فروش</th>
        <th class="p-3">درآمد (تومان)</th>
      </tr>
    </thead>
    <tbody id="top-products-body"></tbody>
  </table>
</div>

<script>
  fetch("{% url 'seller:seller_top_products' %}")
    .then(res => res.json())
    .then(data => {
      const tbody = document.getElementById("top-products-body");
      data.forEach(item => {
        tbody.innerHTML += `
          <tr>
            <td class="p-3">${item.product__name}</td>
            <td class="p-3">${item.total_quantity}</td>
            <td class="p-3">${item.total_revenue}</td>
          </tr>
        `;
      });
    });
</script>
{% endblock %}
