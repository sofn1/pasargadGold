{% extends "base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto px-4 py-10">
  <h2 class="text-2xl font-bold text-[#1C39BB] mb-6">🛍️ قیف فروش</h2>
  <ul id="funnel" class="bg-white shadow rounded-lg divide-y"></ul>
</div>

<script>
  fetch("{% url 'seller_order_funnel' %}")
    .then(res => res.json())
    .then(data => {
      const funnel = document.getElementById("funnel");
      for (const key in data) {
        const value = data[key];
        const label = {
          visitors: "بازدیدکنندگان",
          added_to_cart: "افزودن به سبد خرید",
          checkout_started: "شروع پرداخت",
          payment_success: "پرداخت موفق"
        }[key] || key;

        funnel.innerHTML += `<li class="p-4 flex justify-between"><span>${label}</span><strong>${value}</strong></li>`;
      }
    });
</script>
{% endblock %}
