{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="max-w-6xl mx-auto px-4 py-10">
  <h2 class="text-2xl font-bold text-[#1C39BB] mb-6">محصولات</h2>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
    {% for product in products %}
    <div class="block bg-white rounded-2xl shadow hover:shadow-md transition">
      <a href="{% url 'product_detail' product.id %}">
        <img src="{{ product.image_url }}" class="rounded-t-2xl w-full h-40 object-cover" />
        <div class="p-3">
          <h3 class="text-sm font-semibold">{{ product.name }}</h3>
          <p class="text-[#1C39BB] font-bold">{{ product.price }} تومان</p>
        </div>
      </a>
      {% if product.id %}
      <form method="POST" action="{% url 'add_to_cart' product.id %}" class="p-3">
        {% csrf_token %}
        <button type="submit" class="bg-[#1C39BB] text-white text-sm py-1 px-4 rounded-xl hover:bg-blue-800 transition">
          افزودن به سبد خرید
        </button>
      </form>
      {% else %}
      <div class="p-3">
        <button disabled class="bg-gray-300 text-gray-600 text-sm py-1 px-4 rounded-xl cursor-not-allowed">
          ناموجود
        </button>
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}

