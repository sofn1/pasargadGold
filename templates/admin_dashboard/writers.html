<!-- templates/admin_dashboard/writers.html -->
{% extends '__base.html' %}

{% block title %}نویسندگان{% endblock %}

{% block content %}
<h2 class="my-4">مدیریت نویسندگان</h2>

<div class="d-flex justify-content-between flex-wrap mb-4">
  <form class="d-flex w-50 mb-2" method="get">
    <input class="form-control me-2" type="search" name="q" placeholder="جستجوی نویسنده..." value="{{ request.GET.q }}">
    <button class="btn btn-primary" type="submit">جستجو</button>
  </form>
  <a href="{% url 'admin-dashboard-writer-create' %}" class="btn btn-success">+ افزودن نویسنده</a>
</div>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <table class="table table-striped table-hover mb-0">
      <thead class="table-dark">
        <tr>
          <th>نام</th>
          <th>ایمیل</th>
          <th>مقالات</th>
          <th>آخرین مقاله</th>
          <th>وضعیت</th>
          <th>عملیات</th>
        </tr>
      </thead>
      <tbody>
        {% for writer in writers %}
        <tr>
          <td>{{ writer.get_full_name }}</td>
          <td>{{ writer.email }}</td>
          <td>{{ writer.articles.count }}</td>
          <td>{{ writer.last_article_date|default:"ندارد"|date:"Y/m/d" }}</td>
          <td>
            {% if writer.is_active %}
              <span class="badge bg-success">فعال</span>
            {% else %}
              <span class="badge bg-secondary">غیرفعال</span>
            {% endif %}
          </td>
          <td>
            <a href="{% url 'admin-dashboard-writer-edit' writer.id %}" class="btn btn-sm btn-outline-primary">ویرایش</a>
            <a href="{% url 'admin-dashboard-writer-delete' writer.id %}" class="btn btn-sm btn-outline-danger">حذف</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center text-muted">نویسنده‌ای یافت نشد.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}