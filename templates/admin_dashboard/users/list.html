{% extends "admin_dashboard/dashboard.html" %}

{% block title %}مدیریت کاربران{% endblock %}

{% block mainContent %}
<div class="container-fluid px-4">
  <h2 class="my-4 text-white">کاربران</h2>

  <!-- Search -->
  <form method="get" class="mb-4">
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="جستجو با شماره یا نام..." value="{{ request.GET.q }}">
      <button class="btn btn-outline-secondary" type="submit">جستجو</button>
    </div>
  </form>

  <!-- Table -->
  {% if users %}
  <div class="card shadow-sm">
    <div class="card-body p-0">
      <table class="table table-striped table-hover mb-0">
        <thead class="table-dark">
          <tr>
            <th>نام</th>
            <th>شماره تماس</th>
            <th>تاریخ عضویت</th>
            <th>آخرین ورود</th>
            <th>عملیات</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.full_name|default:"نامشخص" }}</td>
            <td>{{ user.phone_number }}</td>
            <td>{{ user.date_joined|date:"Y/m/d" }}</td>
            <td>{{ user.last_login|date:"Y/m/d H:i"|default:"-" }}</td>
            <td>
              <a href="{% url 'admin_dashboard:admin_user_detail' user.pk %}" class="btn btn-sm btn-info">جزئیات</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {% include 'admin_dashboard/_pagination.html' %}
  {% else %}
  <div class="alert alert-info">کاربری یافت نشد.</div>
  {% endif %}
</div>
{% endblock %}