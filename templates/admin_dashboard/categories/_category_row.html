{% for cat in categories %}
<tr>
  <!-- Category Name (indent optional; level may be undefined with flat list) -->
  <td style="padding-right: {{ level|default:0 }}rem;">
    <span>{{ cat.name }}</span>
  </td>

  <!-- Parent Category -->
  <td>
    {% if cat.parent_name %}
      {{ cat.parent_name }}
    {% else %}
      <span class="text-muted">ندارد</span>
    {% endif %}
  </td>

  <!-- Subcategories (show count or binary) -->
  <td>
    {% if cat.children_count %}
      {{ cat.children_count }} مورد
      {# Or, if you prefer binary:
      <span class="badge bg-success">دارد</span>
      #}
    {% else %}
      <span class="badge bg-secondary">ندارد</span>
    {% endif %}
  </td>

  <!-- Actions -->
  <td>
    <div class="btn-group" role="group">
      <a href="{% url 'admin_dashboard:admin_category_edit' cat.id %}" class="btn btn-sm btn-outline-primary" title="ویرایش">
        <i class="fas fa-edit"></i>
      </a>
      <button type="button"
              class="btn btn-sm btn-outline-danger"
              data-bs-toggle="modal"
              data-bs-target="#deleteModal"
              data-id="{{ cat.id }}"
              data-name="{{ cat.name }}"
              title="حذف">
        <i class="fas fa-trash"></i>
      </button>
      <a href="{% url 'admin_dashboard:admin_category_create' %}?parent_id={{ cat.id }}"
         class="btn btn-sm btn-outline-success"
         title="افزودن زیرمجموعه">
        <i class="fas fa-plus"></i>
      </a>
    </div>
  </td>
</tr>
{# Flat list => no recursion #}
{% endfor %}
