<!-- templates/admin_dashboard/manage_admins.html -->
{% extends "admin_dashboard/dashboard.html" %}

{% block mainContent %}
<h2 class="my-4">مدیریت مدیران سیستم</h2>

<div class="d-flex justify-content-between flex-wrap mb-4">
  <form class="d-flex w-50 mb-2" method="get">
    <input class="form-control me-2" type="search" name="q" placeholder="جستجوی مدیر..." value="{{ request.GET.q }}">
    <button class="btn btn-primary" type="submit">جستجو</button>
  </form>
  <a href="{% url 'admin-dashboard-invite-admin' %}" class="btn btn-success">+ دعوت مدیر</a>
</div>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <table class="table table-striped table-hover mb-0">
      <thead class="table-dark">
        <tr>
          <th>نام</th>
          <th>ایمیل</th>
          <th>نقش</th>
          <th>آخرین فعالیت</th>
          <th>وضعیت</th>
          <th>عملیات</th>
        </tr>
      </thead>
      <tbody>
        {% for admin in admins %}
        <tr>
          <td>{{ admin.get_full_name }}</td>
          <td>{{ admin.email }}</td>
          <td><span class="badge bg-info">{{ admin.get_role_display }}</span></td>
          <td>{{ admin.last_login|default:"ندارد"|date:"Y/m/d" }}</td>
          <td>
            {% if admin.is_active %}
              <span class="badge bg-success">فعال</span>
            {% else %}
              <span class="badge bg-secondary">غیرفعال</span>
            {% endif %}
          </td>
          <td>
            <a href="{% url 'admin-dashboard-edit-admin' admin.id %}" class="btn btn-sm btn-outline-primary">ویرایش</a>
            {% if not admin.is_superuser %}
              <a href="{% url 'admin-dashboard-delete-admin' admin.id %}" class="btn btn-sm btn-outline-danger">حذف</a>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center text-muted">مدیری یافت نشد.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}