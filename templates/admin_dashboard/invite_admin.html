<!-- templates/admin_dashboard/invite_admin.html -->
{% extends "admin_dashboard/_base.html" %}

{% block title %}دعوت از مدیر جدید{% endblock %}

{% block mainContent %}
<div class="container-fluid px-4">
  <h2 class="my-4 text-white">دعوت از مدیر جدید</h2>

  <div class="alert alert-info mb-4">
    <strong>ℹ️ چگونه کار می‌کند؟</strong>
    پس از ارسال، یک ایمیل حاوی لینک ثبت‌نام به آدرس مدیر ارسال می‌شود.
    نقش او در زمان پذیرش دعوت اعمال خواهد شد.
  </div>

  <div class="card shadow-sm border-0">
    <div class="card-body p-4">
      <form method="post">
        {% csrf_token %}

        <div class="mb-3">
          <label for="email" class="form-label">ایمیل مدیر</label>
          <input type="email"
                 class="form-control"
                 id="email"
                 name="email"
                 placeholder="admin@pasargadgold.ir"
                 value="{{ request.GET.email|default:'' }}"
                 required>
          <small class="text-muted">ایمیلی که دعوت به آن ارسال می‌شود.</small>
        </div>

        <div class="mb-3">
          <label for="role" class="form-label">نقش مدیریتی</label>
          <select class="form-control" id="role" name="role" required>
            <option value="">-- انتخاب نقش --</option>
            {% if request.user.is_superuser %}
              <option value="super">👑 مدیر کل (دسترسی کامل)</option>
            {% endif %}
            <option value="support">🛠️ پشتیبانی</option>
            <option value="content">📝 مدیریت محتوا</option>
            <option value="finance">💰 مالی و پرداخت</option>
          </select>
          <small class="text-muted">دسترسی‌ها بر اساس نقش تعیین می‌شوند.</small>
        </div>

        <div class="mb-3 form-check">
          <input type="checkbox"
                 class="form-check-input"
                 id="send_email"
                 name="send_email"
                 checked>
          <label class="form-check-label" for="send_email">
            ارسال ایمیل دعوت
          </label>
        </div>

        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-success px-4">
            <i class="fas fa-envelope"></i> ارسال دعوت
          </button>
          <a href="{% url 'admin:admin_manage_admins' %}" class="btn btn-secondary px-4">
            <i class="fas fa-times"></i> انصراف
          </a>
        </div>
      </form>
    </div>
  </div>

  <!-- Optional: Info Box -->
  <div class="mt-4 p-3 bg-dark text-white rounded-3 border">
    <h6><i class="fas fa-lock"></i> امنیت و دسترسی</h6>
    <ul class="mb-0 small">
      <li>فقط مدیران با دسترسی می‌توانند مدیر جدید دعوت کنند.</li>
      <li>نقش "مدیر کل" فقط برای سوپریوزرها قابل انتخاب است.</li>
      <li>لینک دعوت پس از 7 روز منقضی می‌شود.</li>
    </ul>
  </div>
</div>
{% endblock %}